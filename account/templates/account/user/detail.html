{% extends 'account/base.html' %}

{% load static avatar_tags account_tags blog_tags %}

{% block title %}{{ user.get_username }}{% endblock %}

{% block extra_js %}
    <script src="{% static 'js/get_crsftoken.js' %}"></script>
    <script>
        var post_url = "{% url 'account:follow_user' %}";
        var user_id = "{{ user.id }}";
    </script>
    <script src="{% static 'account/js/follow.js' %}"></script>
{% endblock %}

{% block main %}
    <div class="col-md-6">
        <h1>{{ user.get_username }}</h1>
        <div class="profile-info">
            {% avatar user 180 class='circle-avatar float' %}
        </div>
        <span class="count">
            粉丝数：<span id="total-fans">{% user_fans user %}</span>
        </span>
        <button id="follow-button"
                value="{% if request.user in user.fan0.all %}取消{% endif %}关注">
            {% if request.user not in user.fan0.all %}
                关注
            {% else %}
                取消关注
            {% endif %}
        </button>
    </div>
    <div class="col-md-6">
        <h1>他的文章</h1>
        {% for article in articles %}
            <ul>
                <li><a href="{{ article.get_absolute_url }}">《{{ article.title }}》</a></li>
            </ul>
        {% empty %}
            <p>他还没有任何文章。</p>
        {% endfor %}
    </div>
{% endblock %}